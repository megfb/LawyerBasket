<p-card class="profile-section-card">
  <div class="card-header">
    <h2 class="section-title">
      <span class="material-symbols-outlined section-icon">work</span>
      Deneyimler
    </h2>
    <p-button
      label="Yeni Deneyim"
      icon="pi pi-plus"
      [outlined]="true"
      size="small"
      (onClick)="onAddNew()"
    ></p-button>
  </div>
  
  <div class="card-content">
    @if (experiences.length === 0) {
      <p class="empty-message">Henüz deneyim bilgisi eklenmemiş.</p>
    } @else {
      <div class="experiences-list">
        @for (experience of initialExperiences; track experience.id) {
          <div class="experience-item">
            <span 
              class="material-symbols-outlined item-edit-icon"
              (click)="onEditClick(experience)"
            >edit</span>
            <div class="experience-header">
              <h3 class="experience-position">{{ experience.position }}</h3>
              <span class="experience-company">{{ experience.companyName }}</span>
            </div>
            <div class="experience-duration">
              <span class="material-symbols-outlined duration-icon">calendar_today</span>
              <span>{{ experience.startDate }} - {{ experience.endDate || 'Devam ediyor' }}</span>
            </div>
            @if (experience.description) {
              <p class="experience-description">{{ experience.description }}</p>
            }
            @if (hasMoreExperiences || experience !== initialExperiences[initialExperiences.length - 1]) {
              <div class="experience-divider"></div>
            }
          </div>
        }
        
        @if (hasMoreExperiences) {
          <div 
            class="additional-experiences-wrapper"
            [@slideAnimation]="showAllExperiences ? 'expanded' : 'collapsed'"
          >
            @for (experience of additionalExperiences; track experience.id) {
              <div class="experience-item">
                <span 
                  class="material-symbols-outlined item-edit-icon"
                  (click)="onEditClick(experience)"
                >edit</span>
                <div class="experience-header">
                  <h3 class="experience-position">{{ experience.position }}</h3>
                  <span class="experience-company">{{ experience.companyName }}</span>
                </div>
                <div class="experience-duration">
                  <span class="material-symbols-outlined duration-icon">calendar_today</span>
                  <span>{{ experience.startDate }} - {{ experience.endDate || 'Devam ediyor' }}</span>
                </div>
                @if (experience.description) {
                  <p class="experience-description">{{ experience.description }}</p>
                }
                @if (experience !== additionalExperiences[additionalExperiences.length - 1]) {
                  <div class="experience-divider"></div>
                }
              </div>
            }
          </div>
        }
      </div>
      
      @if (hasMoreExperiences) {
        <div class="show-more-container">
          <p-button
            [label]="showAllExperiences ? 'Daha Az Göster' : 'Daha Fazla Göster'"
            [icon]="showAllExperiences ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"
            [outlined]="true"
            [text]="true"
            size="small"
            (onClick)="toggleShowAll()"
            class="show-more-button"
          ></p-button>
        </div>
      }
    }
  </div>
</p-card>

<app-experience-edit-modal
  [(visible)]="showEditModal"
  [experience]="selectedExperience"
  [lawyerProfileId]="lawyerProfileId"
  (saved)="onExperienceSaved()"
  (deleted)="onExperienceDeleted($event)"
></app-experience-edit-modal>

